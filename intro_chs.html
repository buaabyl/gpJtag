<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>前言 &mdash; gpJtag alpha documentation</title>
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     'alpha',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="gpJtag alpha documentation" href="index.html" />
    <link rel="up" title="中文版" href="index_chs.html" />
    <link rel="next" title="CPLD内部结构" href="cpld_chs.html" />
    <link rel="prev" title="中文版" href="index_chs.html" />
   
   <link rel="stylesheet" type="text/css" media="screen" href="_static/stylesheet.css">

  </head>
  <body>
  
    <!-- HEADER -->
    <div id="header_wrap" class="outer">
		<style type="text/css">
		header a {
			color:#FFFFFF;
			text-decoration: none
		}
		header a:hover {
			color:#FFFFFF;
			text-decoration: none
		}
		</style>
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/buaabyl/gpJtag">View on GitHub</a>		  
          <h1 id="project_title"><a href="index.html" title="Go back to home page">gpJtag</a></h1>
          <h2 id="project_tagline"><a href="index.html" title="Go back to home page">General Purpose Jtag</a></h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/buaabyl/gpJtag/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/buaabyl/gpJtag/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>


    <div class="document">
    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
            
  <p>&lt;
<a class="reference internal" href="index.html"><em>主页</em></a> /
<a class="reference internal" href="index_chs.html"><em>目录</em></a> /
&gt;</p>
<div class="section" id="id1">
<h1>前言<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<p>Jtag是Joint Test Action Group的缩写，简单来说就是“在线测试和边界扫描”。常见的ARM、CPLD、FPGA都带有Jtag接口，可以用于更新固件，测试IC的IO功能。</p>
<p>本文主要是为了实现一个Jtag调试器，我自己也做过专用的Jtag调试器，但是为每个项目弄一个Jtag适配器太麻烦了，而且感觉是重复的工作，所以有个打算把它弄成通用的。目前开源的OpenOCD算是非常好的一个Jtag工具，但是总觉着用着麻烦，代码过于庞杂，修改起来比较麻烦。</p>
<p>其实如果只是实现一个Jtag适配器并不是很麻烦，但是要想没做过的人快速理解就比较难了，因为涉及到硬件的实现，所以本文会先介绍和Jtag相关的背景知识和技术，然后给出实现的方法，最后才是实现Jtag适配器。</p>
<p>目前的思路是先介绍CPLD，一是我用CPLD和FPGA比较多，二是CPLD相对FPGA简单一点，而且CPLD的配置是一项全面但不那么复杂的任务，所以这个切入点比较好。</p>
<p>由于自己基本只用过xilinx的器件，所以也就优先选择xilinx的产品来分析，而且xilinx的资料相对比较公开。</p>
<div class="section" id="jtag">
<h2>Jtag接口<a class="headerlink" href="#jtag" title="Permalink to this headline">¶</a></h2>
<p>Jtag一般包含4根线</p>
<ul class="simple">
<li>TCK（Test Clock）由调试器给到设备的测试时钟</li>
<li>TMS（Test Mode State）由调试器给到设备的信号，用于切换TAP的状态</li>
<li>TDI（Test Data Input）对于被测设备是数据输入，对于调试器是数据输出</li>
<li>TDO（Test Data Output）对于被测设备是数据输出，对于调试器是数据输出</li>
</ul>
<p>Jtag常见的用途是在线调试、固件下载。虽然标准中只规定了4线：TCK、TDI、TDO、TMS。</p>
<img alt="_images/jtag_hardware_look.jpg" src="_images/jtag_hardware_look.jpg" />
<p>但是不同的厂家的接口线序不一样，而且TAP状态机的寄存器位数也不一样，
这直接导致各个下载线不兼容，每个开发板上ARM、FPGA的接口都不一样，而且每家的FPGA也不兼容。</p>
<p>这个是ulink的各种常见的接口定义</p>
<img alt="_images/ulink2_connector_20_16_14_10pin.png" src="_images/ulink2_connector_20_16_14_10pin.png" />
<p>这个是xilinx的接口定义</p>
<img alt="_images/xilinx_connector_14_10pin.png" src="_images/xilinx_connector_14_10pin.png" />
<p>本文档会优先完成CPLD的Jtag配置，然后再实现ARM的调试下载功能。</p>
</div>
</div>


            <hr/>
            <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/"><img alt="Creative Commons License" src="_static/CC-BY-NC-ND-88x31.png" style="box-shadow:none;border:0;"/></a> <a href="https://www.gnu.org/copyleft/gpl.html"><img alt="GNU General Public License version 3" src="_static/gplv3-77x31.png" style="box-shadow:none;border:0;"/></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/">Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License</a>. And license of code is under <a href="https://www.gnu.org/copyleft/gpl.html">GNU General Public License Version 3</a>. <br />本著作係採用<a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh_TW">創用 CC 姓名標示-非商業性-禁止改作 4.0 國際 授權條款</a>授權. 涉及到的代码使用 <a href="https://www.gnu.org/copyleft/gpl.html">GNU通用许可证 第三版</a> 授权.
      </section>
    </div>
      <div class="clearer"></div>
    </div>
    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">gpJtag maintained by <a href="https://github.com/buaabyl">buaabyl</a></p>
		<p>Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
        Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

  </body>
</html>